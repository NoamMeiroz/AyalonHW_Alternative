
ADD server=(ip) environment varaible
---------------------
CREATE TABLE `time_slots` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `TIME_SLOT` varchar(45) NOT NULL,
  `HOUR` time NOT NULL,
  `DIRECTION` varchar(45) NOT NULL,
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `direction` (`DIRECTION`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci

-----------------

ALTER TABLE `alternative`.`employees` 
ADD COLUMN `EXIT_HOUR_TO_WORK` INT(3) NOT NULL DEFAULT 2 AFTER `WORK_SITE`,
ADD COLUMN `RETURN_HOUR_TO_HOME` INT(3) NOT NULL DEFAULT 7 AFTER `EXIT_HOUR_TO_WORK`,
ADD COLUMN `FINAL_SHORT_HOURS_GRADE` INT(6) NULL DEFAULT NULL AFTER `SHIFTING_WORKING_DAYS_GRADE`,
ADD COLUMN `FINAL_SHIFTING_HOURS_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_SHORT_HOURS_GRADE`,
ADD COLUMN `FINAL_BICYCLE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_SHIFTING_HOURS_GRADE`,
ADD COLUMN `FINAL_SCOOTER_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_BICYCLE_GRADE`,
ADD COLUMN `FINAL_PERSONALIZED_SHUTTLE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_SCOOTER_GRADE`,
ADD COLUMN `FINAL_WORK_SHUTTLE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_PERSONALIZED_SHUTTLE_GRADE`,
ADD COLUMN `FINAL_CARSHARE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_WORK_SHUTTLE_GRADE`,
ADD COLUMN `FINAL_CARPOOL_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_CARSHARE_GRADE`,
ADD COLUMN `FINAL_CABSHARE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_CARPOOL_GRADE`,
ADD COLUMN `FINAL_PUBLIC_TRANSPORT_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_CABSHARE_GRADE`,
ADD COLUMN `FINAL_WALKING_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_PUBLIC_TRANSPORT_GRADE`,
ADD COLUMN `FINAL_WORKING_FROM_HOME_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_WALKING_GRADE`,
ADD COLUMN `FINAL_SHARED_WORKSPACE_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_WORKING_FROM_HOME_GRADE`,
ADD COLUMN `FINAL_SHIFTING_WORKING_DAYS_GRADE` INT(6) DEFAULT NULL AFTER `FINAL_SHARED_WORKSPACE_GRADE`,
ADD INDEX `fk_time_slots_1_idx` (`EXIT_HOUR_TO_WORK` ASC) VISIBLE,
ADD INDEX `fk_time_slots_2_idx` (`RETURN_HOUR_TO_HOME` ASC) VISIBLE,
ADD INDEX `city_idx` (`CITY` ASC) VISIBLE;

ALTER TABLE `alternative`.`employees` 
CHANGE COLUMN `SHORT_HOURS_GRADE` `SHORT_HOURS_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `SHIFTING_HOURS_GRADE` `SHIFTING_HOURS_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `BICYCLE_GRADE` `BICYCLE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `SCOOTER_GRADE` `SCOOTER_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `PERSONALIZED_SHUTTLE_GRADE` `PERSONALIZED_SHUTTLE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `WORK_SHUTTLE_GRADE` `WORK_SHUTTLE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `CARSHARE_GRADE` `CARSHARE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `CARPOOL_GRADE` `CARPOOL_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `CABSHARE_GRADE` `CABSHARE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `PUBLIC_TRANSPORT_GRADE` `PUBLIC_TRANSPORT_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `WALKING_GRADE` `WALKING_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `WORKING_FROM_HOME_GRADE` `WORKING_FROM_HOME_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `SHARED_WORKSPACE_GRADE` `SHARED_WORKSPACE_GRADE` INT(6) DEFAULT NULL,
CHANGE COLUMN `SHIFTING_WORKING_DAYS_GRADE` `SHIFTING_WORKING_DAYS_GRADE` INT(6) DEFAULT NULL;

ALTER TABLE `alternative`.`employees` 
ADD INDEX `f_short_hours_idx` (`FINAL_SHORT_HOURS_GRADE` ASC) VISIBLE,
ADD INDEX `f_shift_hours_idx` (`FINAL_SHIFTING_HOURS_GRADE` ASC) VISIBLE,
ADD INDEX `f_bicycle_idx` (`FINAL_BICYCLE_GRADE` ASC) VISIBLE,
ADD INDEX `f_scooter_idx` (`FINAL_SCOOTER_GRADE` ASC) VISIBLE,
ADD INDEX `f_pers_shuttle_idx` (`FINAL_PERSONALIZED_SHUTTLE_GRADE` ASC) VISIBLE,
ADD INDEX `f_work_shuttle_idx` (`FINAL_WORK_SHUTTLE_GRADE` ASC) VISIBLE,
ADD INDEX `f_carshare_idx` (`FINAL_CARSHARE_GRADE` ASC) VISIBLE,
ADD INDEX `f_carpool_idx` (`FINAL_CARPOOL_GRADE` ASC) VISIBLE,
ADD INDEX `f_cabshare_idx` (`FINAL_CABSHARE_GRADE` ASC) VISIBLE,
ADD INDEX `f_pub_trans_idx` (`FINAL_PUBLIC_TRANSPORT_GRADE` ASC) VISIBLE,
ADD INDEX `f_walking_idx` (`FINAL_WALKING_GRADE` ASC) VISIBLE,
ADD INDEX `f_home_idx` (`FINAL_WORKING_FROM_HOME_GRADE` ASC) VISIBLE,
ADD INDEX `f_shared_workspace_idx` (`FINAL_SHARED_WORKSPACE_GRADE` ASC) VISIBLE,
ADD INDEX `f_shift_work_days_idx` (`FINAL_SHIFTING_WORKING_DAYS_GRADE` ASC) VISIBLE;

ALTER TABLE `alternative`.`employees` 
ADD CONSTRAINT `fk_time_slots_1`
  FOREIGN KEY (`EXIT_HOUR_TO_WORK`)
  REFERENCES `alternative`.`time_slots` (`ID`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `fk_time_slots_2`
  FOREIGN KEY (`RETURN_HOUR_TO_HOME`)
  REFERENCES `alternative`.`time_slots` (`ID`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
ALTER TABLE `alternative`.`employees` 
ADD COLUMN `BEST_ROUTE_TO_HOME` JSON NULL DEFAULT NULL AFTER `BEST_ROUTE_TO_WORK`,
CHANGE COLUMN `BEST_ROUTE` `BEST_ROUTE_TO_WORK` JSON NULL DEFAULT NULL ;

ALTER TABLE `alternative`.`employees` 
ADD COLUMN `UPLOAD_ERROR` JSON NULL AFTER `FINAL_SHIFTING_WORKING_DAYS_GRADE`;

ALTER TABLE `alternative`.`employees` 
CHANGE COLUMN `WORKER_ID` `WORKER_ID` INT UNSIGNED NOT NULL ;

UPDATE employees emp SET UPLOAD_ERROR=BEST_ROUTE_TO_WORK 
where JSON_CONTAINS_PATH(emp.BEST_ROUTE_TO_WORK, 'one', '$.error')=1;

update employees emp SET `FINAL_SHORT_HOURS_GRADE` = `SHORT_HOURS_GRADE`,
  `FINAL_SHIFTING_HOURS_GRADE`= `SHIFTING_HOURS_GRADE`,
  `FINAL_BICYCLE_GRADE` =`BICYCLE_GRADE`,
  `FINAL_SCOOTER_GRADE` =`SCOOTER_GRADE`,
  `FINAL_PERSONALIZED_SHUTTLE_GRADE`= `PERSONALIZED_SHUTTLE_GRADE`,
  `FINAL_WORK_SHUTTLE_GRADE`= `WORK_SHUTTLE_GRADE`,
  `FINAL_CARSHARE_GRADE`= `CARSHARE_GRADE`,
  `FINAL_CARPOOL_GRADE` =`CARPOOL_GRADE`,
  `FINAL_CABSHARE_GRADE`= `CABSHARE_GRADE`,
  `FINAL_PUBLIC_TRANSPORT_GRADE`= `PUBLIC_TRANSPORT_GRADE`,
  `FINAL_WALKING_GRADE`= `WALKING_GRADE`,
  `FINAL_WORKING_FROM_HOME_GRADE` =`WORKING_FROM_HOME_GRADE`,
  `FINAL_SHARED_WORKSPACE_GRADE` =`SHARED_WORKSPACE_GRADE`,
  `FINAL_SHIFTING_WORKING_DAYS_GRADE` =`SHIFTING_WORKING_DAYS_GRADE`;

///
CREATE TABLE `alternative`.`configuration` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `VALUE` VARCHAR(50) NOT NULL,
  `TYPE` VARCHAR(45) NOT NULL,
  `createdAt` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `index2` (`NAME` ASC) VISIBLE);
  
 
-----------------------------
docker tag node_server nativelaasakimcr.azurecr.io/node_server:1.1.0
docker push nativelaasakimcr.azurecr.io/node_server:1.1.0

docker tag native_laasakim_dev nativelaasakimcr.azurecr.io/native_laasakim:1.1.0
docker push nativelaasakimcr.azurecr.io/native_laasakim:1.1.0

docker tag nginx nativelaasakimcr.azurecr.io/nginx:1.1.0
docker push nativelaasakimcr.azurecr.io/nginx:1.1.0

docker pull nativelaasakimcr.azurecr.io/node_server:1.1.0
docker pull nativelaasakimcr.azurecr.io/native_laasakim:1.1.0
docker pull nativelaasakimcr.azurecr.io/nginx:1.1.0

